import{r as i,k as y,n as A,p as V,c as r,s as v,a as t,v as x,x as D,y as g,A as _,t as c,F as N,b as S,g as m,E as B,o as d,G as E,e as M,D as $,f as p,B as F,m as T}from"./index-B6zlSGrq.js";import{S as U}from"./SidebarMenu-CSgmmRR-.js";const z={class:"grid"},G={class:"container mt-4"},I={class:"col-md-6"},L={class:"col-md-3"},R={class:"col-md-3"},j={class:"btn btn-primary w-100"},q={key:0,class:"table-responsive"},H={class:"table table-bordered"},J=["onClick"],K=["onClick"],W={__name:"AsignaturasView",setup(O){const e=i({nombre:"",codigo:""}),u=i([]),n=i(!1),l=i(null),b=y(m,"asignaturas"),f=async()=>{!e.value.nombre||!e.value.codigo||(n.value&&l.value?await $(p(m,"asignaturas",l.value),{...e.value}):await F(b,{...e.value}),e.value={nombre:"",codigo:""},n.value=!1,l.value=null)},h=s=>{e.value={nombre:s.nombre,codigo:s.codigo},n.value=!0,l.value=s.id},k=async s=>{await T(p(m,"asignaturas",s))};return A(()=>{V(b,s=>{u.value=s.docs.map(a=>({id:a.id,...a.data()}))})}),(s,a)=>{const w=B("router-link");return d(),r("div",z,[v(U),t("div",G,[a[4]||(a[4]=t("h3",null,"Asignaturas",-1)),t("form",{onSubmit:D(f,["prevent"]),class:"row g-2 mb-3"},[t("div",I,[g(t("input",{"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.nombre=o),class:"form-control",placeholder:"Nombre de la asignatura"},null,512),[[_,e.value.nombre]])]),t("div",L,[g(t("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.codigo=o),class:"form-control",placeholder:"Código"},null,512),[[_,e.value.codigo]])]),t("div",R,[t("button",j,c(n.value?"Actualizar":"Crear"),1)])],32),u.value.length?(d(),r("div",q,[t("table",H,[a[3]||(a[3]=t("thead",null,[t("tr",null,[t("th",null,"Nombre"),t("th",null,"Código"),t("th",null,"Acciones")])],-1)),t("tbody",null,[(d(!0),r(N,null,S(u.value,o=>(d(),r("tr",{key:o.id},[t("td",null,c(o.nombre),1),t("td",null,c(o.codigo),1),t("td",null,[t("button",{onClick:C=>h(o),class:"btn btn-sm btn-warning me-2"},"Editar",8,J),t("button",{onClick:C=>k(o.id),class:"btn btn-sm btn-danger"},"Eliminar",8,K),v(w,{to:`/asignaturas/${o.id}`,class:"btn btn-sm btn-info"},{default:E(()=>a[2]||(a[2]=[M("Ver detalle")])),_:2,__:[2]},1032,["to"])])]))),128))])])])):x("",!0)])])}}};export{W as default};

import{r as i,c as y,o as A,b as V,g as r,i as v,j as t,m as x,w as N,k as g,v as _,t as c,F as D,p as S,a as m,q as M,f as d,s as B,x as E,y as $,z as p,l as z,A as F}from"./index-CAXonqoc.js";import{S as T}from"./SidebarMenu-EIULnzDk.js";const U={class:"grid"},j={class:"container mt-4"},q={class:"col-md-6"},I={class:"col-md-3"},L={class:"col-md-3"},R={class:"btn btn-primary w-100"},G={key:0,class:"table-responsive"},H={class:"table table-bordered"},J=["onClick"],K=["onClick"],W={__name:"AsignaturasView",setup(O){const e=i({nombre:"",codigo:""}),u=i([]),n=i(!1),l=i(null),b=y(m,"asignaturas"),f=async()=>{!e.value.nombre||!e.value.codigo||(n.value&&l.value?await $(p(m,"asignaturas",l.value),{...e.value}):await z(b,{...e.value}),e.value={nombre:"",codigo:""},n.value=!1,l.value=null)},h=s=>{e.value={nombre:s.nombre,codigo:s.codigo},n.value=!0,l.value=s.id},k=async s=>{await F(p(m,"asignaturas",s))};return A(()=>{V(b,s=>{u.value=s.docs.map(a=>({id:a.id,...a.data()}))})}),(s,a)=>{const w=M("router-link");return d(),r("div",U,[v(T),t("div",j,[a[4]||(a[4]=t("h3",null,"Asignaturas",-1)),t("form",{onSubmit:N(f,["prevent"]),class:"row g-2 mb-3"},[t("div",q,[g(t("input",{"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.nombre=o),class:"form-control",placeholder:"Nombre de la asignatura"},null,512),[[_,e.value.nombre]])]),t("div",I,[g(t("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.codigo=o),class:"form-control",placeholder:"Código"},null,512),[[_,e.value.codigo]])]),t("div",L,[t("button",R,c(n.value?"Actualizar":"Crear"),1)])],32),u.value.length?(d(),r("div",G,[t("table",H,[a[3]||(a[3]=t("thead",null,[t("tr",null,[t("th",null,"Nombre"),t("th",null,"Código"),t("th",null,"Acciones")])],-1)),t("tbody",null,[(d(!0),r(D,null,S(u.value,o=>(d(),r("tr",{key:o.id},[t("td",null,c(o.nombre),1),t("td",null,c(o.codigo),1),t("td",null,[t("button",{onClick:C=>h(o),class:"btn btn-sm btn-warning me-2"},"Editar",8,J),t("button",{onClick:C=>k(o.id),class:"btn btn-sm btn-danger"},"Eliminar",8,K),v(w,{to:`/asignaturas/${o.id}`,class:"btn btn-sm btn-info"},{default:B(()=>a[2]||(a[2]=[E("Ver detalle")])),_:2,__:[2]},1032,["to"])])]))),128))])])])):x("",!0)])])}}};export{W as default};
